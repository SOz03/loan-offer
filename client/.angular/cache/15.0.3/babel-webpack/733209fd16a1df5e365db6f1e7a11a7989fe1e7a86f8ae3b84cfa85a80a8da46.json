{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Login is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Login must be at least 5 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Login must be at most 20 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtemplate(1, LoginComponent_div_9_div_1_Template, 2, 0, \"div\", 12);\n    i0.ɵɵtemplate(2, LoginComponent_div_9_div_2_Template, 2, 0, \"div\", 12);\n    i0.ɵɵtemplate(3, LoginComponent_div_9_div_3_Template, 2, 0, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    let tmp_1_0;\n    let tmp_2_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r0.form.get(\"username\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r0.form.get(\"username\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_2_0 = ctx_r0.form.get(\"username\")) == null ? null : tmp_2_0.errors == null ? null : tmp_2_0.errors[\"maxlength\"]);\n  }\n}\nfunction LoginComponent_div_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \"Password is required\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_15_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtext(1, \" Password must be at least 6 characters \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LoginComponent_div_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 11);\n    i0.ɵɵtemplate(1, LoginComponent_div_15_div_1_Template, 2, 0, \"div\", 12);\n    i0.ɵɵtemplate(2, LoginComponent_div_15_div_2_Template, 2, 0, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    let tmp_0_0;\n    let tmp_1_0;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_0_0 = ctx_r1.form.get(\"password\")) == null ? null : tmp_0_0.errors == null ? null : tmp_0_0.errors[\"required\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (tmp_1_0 = ctx_r1.form.get(\"password\")) == null ? null : tmp_1_0.errors == null ? null : tmp_1_0.errors[\"minlength\"]);\n  }\n}\nfunction LoginComponent_div_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Login failed: \", ctx_r2.errorMessage, \" \");\n  }\n}\nexport class LoginComponent {\n  constructor(authService, storageService, router) {\n    this.authService = authService;\n    this.storageService = storageService;\n    this.router = router;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.form = new FormGroup({\n      username: new FormControl('', [Validators.required, Validators.minLength(5), Validators.maxLength(20)]),\n      password: new FormControl('', [Validators.required, Validators.minLength(6)])\n    });\n  }\n  ngOnInit() {}\n  onSubmit(event) {\n    event.preventDefault();\n    const {\n      username,\n      password\n    } = this.form.value;\n    this.authService.login({\n      username,\n      password\n    }).subscribe({\n      next: data => {\n        this.storageService.saveToken(data.token);\n        this.storageService.saveUser(data);\n      },\n      complete: () => {\n        this.isLoginFailed = false;\n        this.router.navigate(['home']);\n      },\n      error: err => {\n        this.errorMessage = err.message || '';\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i1.StorageService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 21,\n  vars: 4,\n  consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"username\"], [\"type\", \"text\", \"name\", \"username\", \"formControlName\", \"username\", 1, \"form-control\"], [\"class\", \"alert-danger\", 4, \"ngIf\"], [\"type\", \"password\", \"name\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"alert-danger\"], [4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementStart(3, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener($event) {\n        return ctx.onSubmit($event);\n      });\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"label\", 5);\n      i0.ɵɵtext(6, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"--> \");\n      i0.ɵɵelement(8, \"input\", 6);\n      i0.ɵɵtemplate(9, LoginComponent_div_9_Template, 4, 3, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"div\", 4)(11, \"label\");\n      i0.ɵɵtext(12, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(13, \"--> \");\n      i0.ɵɵelement(14, \"input\", 8);\n      i0.ɵɵtemplate(15, LoginComponent_div_15_Template, 3, 2, \"div\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"div\", 4)(17, \"button\", 9);\n      i0.ɵɵtext(18, \" Login \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"div\", 4);\n      i0.ɵɵtemplate(20, LoginComponent_div_20_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      let tmp_1_0;\n      let tmp_2_0;\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_1_0 = ctx.form.get(\"username\")) == null ? null : tmp_1_0.dirty) && ((tmp_1_0 = ctx.form.get(\"username\")) == null ? null : tmp_1_0.invalid));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ((tmp_2_0 = ctx.form.get(\"password\")) == null ? null : tmp_2_0.dirty) && ((tmp_2_0 = ctx.form.get(\"password\")) == null ? null : tmp_2_0.invalid));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\".col-md-12[_ngcontent-%COMP%] {\\n  align-items: center;\\n  justify-content: center;\\n  display: flex;\\n}\\n\\n.card-container[_ngcontent-%COMP%] {\\n  padding: 30px 30px 10px 30px;\\n  margin-top: 20px;\\n  width: 350px;\\n}\\n\\n.profile-img-card[_ngcontent-%COMP%] {\\n  width: 198px;\\n  align-self: center;\\n  margin-bottom: 20px;\\n}\\n/*# sourceURL=webpack://./src/app/pages/login/login.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsYUFBYTtBQUNmOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLGdCQUFnQjtFQUNoQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi5jb2wtbWQtMTIge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbn1cblxuLmNhcmQtY29udGFpbmVyIHtcbiAgcGFkZGluZzogMzBweCAzMHB4IDEwcHggMzBweDtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgd2lkdGg6IDM1MHB4O1xufVxuXG4ucHJvZmlsZS1pbWctY2FyZCB7XG4gIHdpZHRoOiAxOThweDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["FormControl","FormGroup","Validators","i0","LoginComponent","constructor","authService","storageService","router","form","username","required","minLength","maxLength","password","ngOnInit","onSubmit","event","preventDefault","value","login","subscribe","next","data","saveToken","token","saveUser","complete","isLoginFailed","navigate","error","err","errorMessage","message","reloadPage","window","location","reload","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\loan-offer-main\\client\\src\\app\\pages\\login\\login.component.ts","D:\\loan-offer-main\\client\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { AuthService, StorageService } from 'src/app/services';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent implements OnInit {\n  form: FormGroup;\n  isLoginFailed = false;\n  errorMessage = '';\n\n  constructor(\n    private authService: AuthService,\n    private storageService: StorageService,\n    private router: Router\n  ) {\n    this.form = new FormGroup({\n      username: new FormControl('', [\n        Validators.required,\n        Validators.minLength(5),\n        Validators.maxLength(20),\n      ]),\n      password: new FormControl('', [\n        Validators.required,\n        Validators.minLength(6),\n      ]),\n    });\n  }\n\n  ngOnInit(): void {}\n\n  onSubmit(event: Event): void {\n    event.preventDefault();\n\n    const { username, password } = this.form.value;\n\n    this.authService.login({ username, password }).subscribe({\n      next: (data: { token: string }) => {\n        this.storageService.saveToken(data.token);\n        this.storageService.saveUser(data);\n      },\n      complete: () => {\n        this.isLoginFailed = false;\n        this.router.navigate(['home']);\n      },\n      error: (err) => {\n        this.errorMessage = err.message || '';\n        this.isLoginFailed = true;\n      },\n    });\n  }\n\n  reloadPage(): void {\n    window.location.reload();\n  }\n}\n","<div class=\"col-md-12\">\n  <div class=\"card card-container\">\n    <img id=\"profile-img\" src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\" class=\"profile-img-card\" />\n    <form (ngSubmit)=\"onSubmit($event)\" [formGroup]=\"form\" name=\"form\" novalidate>\n      <div class=\"form-group\">\n        <label for=\"username\">Login</label>-->\n        <input type=\"text\" class=\"form-control\" name=\"username\" formControlName=\"username\" />\n        <div class=\"alert-danger\" *ngIf=\"form.get('username')?.dirty && form.get('username')?.invalid\">\n          <div *ngIf=\"form.get('username')?.errors?.['required']\">Login is required</div>\n          <div *ngIf=\"form.get('username')?.errors?.['minlength']\">\n            Login must be at least 5 characters\n          </div>\n          <div *ngIf=\"form.get('username')?.errors?.['maxlength']\">\n            Login must be at most 20 characters\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <label>Password</label>-->\n        <input type=\"password\" class=\"form-control\" name=\"password\" formControlName=\"password\" required />\n        <div class=\"alert-danger\" *ngIf=\"form.get('password')?.dirty && form.get('password')?.invalid\">\n          <div *ngIf=\"form.get('password')?.errors?.['required']\">Password is required</div>\n          <div *ngIf=\"form.get('password')?.errors?.['minlength']\">\n            Password must be at least 6 characters\n          </div>\n        </div>\n      </div>\n      <div class=\"form-group\">\n        <button class=\"btn btn-primary btn-block\">\n          Login\n        </button>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"errorMessage\">\n          Login failed: {{ errorMessage }}\n        </div>\n      </div>\n    </form>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}