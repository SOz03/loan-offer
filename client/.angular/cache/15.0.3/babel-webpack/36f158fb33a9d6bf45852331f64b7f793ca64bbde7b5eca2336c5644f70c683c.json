{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction LoginComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Login failed: \", ctx_r0.errorMessage, \" \");\n  }\n}\nexport class LoginComponent {\n  constructor(authService, storageService, router) {\n    this.authService = authService;\n    this.storageService = storageService;\n    this.router = router;\n    this.isLoginFailed = false;\n    this.errorMessage = '';\n    this.form = new FormGroup({\n      login: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required])\n    });\n  }\n  ngOnInit() {}\n  onSubmit(event) {\n    event.preventDefault();\n    const {\n      login,\n      password\n    } = this.form.value;\n    this.authService.login({\n      login,\n      password\n    }).subscribe({\n      next: data => {\n        this.storageService.saveToken(data.token);\n        this.storageService.saveUser(data);\n      },\n      complete: () => {\n        this.isLoginFailed = false;\n        this.router.navigate(['home']);\n      },\n      error: err => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      }\n    });\n  }\n  reloadPage() {\n    window.location.reload();\n  }\n}\nLoginComponent.ɵfac = function LoginComponent_Factory(t) {\n  return new (t || LoginComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i1.StorageService), i0.ɵɵdirectiveInject(i2.Router));\n};\nLoginComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: LoginComponent,\n  selectors: [[\"app-login\"]],\n  decls: 19,\n  vars: 2,\n  consts: [[1, \"col-md-12\"], [1, \"card\", \"card-container\"], [\"id\", \"profile-img\", \"src\", \"//ssl.gstatic.com/accounts/ui/avatar_2x.png\", 1, \"profile-img-card\"], [\"name\", \"form\", \"novalidate\", \"\", 3, \"formGroup\", \"ngSubmit\"], [1, \"form-group\"], [\"type\", \"text\", \"name\", \"login\", \"formControlName\", \"login\", 1, \"form-control\"], [\"type\", \"password\", \"name\", \"password\", \"formControlName\", \"password\", \"required\", \"\", 1, \"form-control\"], [1, \"btn\", \"btn-primary\", \"btn-block\"], [\"class\", \"alert alert-danger\", \"role\", \"alert\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\"]],\n  template: function LoginComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n      i0.ɵɵelement(2, \"img\", 2);\n      i0.ɵɵelementStart(3, \"form\", 3);\n      i0.ɵɵlistener(\"ngSubmit\", function LoginComponent_Template_form_ngSubmit_3_listener($event) {\n        return ctx.onSubmit($event);\n      });\n      i0.ɵɵelementStart(4, \"div\", 4)(5, \"label\");\n      i0.ɵɵtext(6, \"Login\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(7, \"--> \");\n      i0.ɵɵelement(8, \"input\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"div\", 4)(10, \"label\");\n      i0.ɵɵtext(11, \"Password\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(12, \"--> \");\n      i0.ɵɵelement(13, \"input\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 4)(15, \"button\", 7);\n      i0.ɵɵtext(16, \" Login \");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(17, \"div\", 4);\n      i0.ɵɵtemplate(18, LoginComponent_div_18_Template, 2, 1, \"div\", 8);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"formGroup\", ctx.form);\n      i0.ɵɵadvance(15);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n    }\n  },\n  dependencies: [i3.NgIf, i4.ɵNgNoValidate, i4.DefaultValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.RequiredValidator, i4.FormGroupDirective, i4.FormControlName],\n  styles: [\".col-md-12[_ngcontent-%COMP%] {\\n  align-items: center;\\n  justify-content: center;\\n  display: flex;\\n}\\n\\n.card-container[_ngcontent-%COMP%] {\\n  padding: 30px 30px 10px 30px;\\n  margin-top: 20px;\\n  width: 350px;\\n}\\n\\n.profile-img-card[_ngcontent-%COMP%] {\\n  width: 198px;\\n  align-self: center;\\n  margin-bottom: 20px;\\n}\\n/*# sourceURL=webpack://./src/app/pages/login/login.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvbG9naW4vbG9naW4uY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLG1CQUFtQjtFQUNuQix1QkFBdUI7RUFDdkIsYUFBYTtBQUNmOztBQUVBO0VBQ0UsNEJBQTRCO0VBQzVCLGdCQUFnQjtFQUNoQixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxZQUFZO0VBQ1osa0JBQWtCO0VBQ2xCLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi5jb2wtbWQtMTIge1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgZGlzcGxheTogZmxleDtcbn1cblxuLmNhcmQtY29udGFpbmVyIHtcbiAgcGFkZGluZzogMzBweCAzMHB4IDEwcHggMzBweDtcbiAgbWFyZ2luLXRvcDogMjBweDtcbiAgd2lkdGg6IDM1MHB4O1xufVxuXG4ucHJvZmlsZS1pbWctY2FyZCB7XG4gIHdpZHRoOiAxOThweDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"AACA,SAASA,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;;;;;;;;ICiB3DC,8BAAkE;IAChEA,YACF;IAAAA,iBAAM;;;;IADJA,eACF;IADEA,kEACF;;;ADNR,OAAM,MAAOC,cAAc;EAKzBC,YACUC,WAAwB,EACxBC,cAA8B,EAC9BC,MAAc;IAFd,gBAAW,GAAXF,WAAW;IACX,mBAAc,GAAdC,cAAc;IACd,WAAM,GAANC,MAAM;IANhB,kBAAa,GAAG,KAAK;IACrB,iBAAY,GAAG,EAAE;IAOf,IAAI,CAACC,IAAI,GAAG,IAAIR,SAAS,CAAC;MACxBS,KAAK,EAAE,IAAIV,WAAW,CAAC,EAAE,EAAE,CAACE,UAAU,CAACS,QAAQ,EAAET,UAAU,CAACU,KAAK,CAAC,CAAC;MACnEC,QAAQ,EAAE,IAAIb,WAAW,CAAC,EAAE,EAAE,CAACE,UAAU,CAACS,QAAQ,CAAC;KACpD,CAAC;EACJ;EAEAG,QAAQ,IAAU;EAElBC,QAAQ,CAACC,KAAY;IACnBA,KAAK,CAACC,cAAc,EAAE;IAEtB,MAAM;MAAEP,KAAK;MAAEG;IAAQ,CAAE,GAAG,IAAI,CAACJ,IAAI,CAACS,KAAK;IAE3C,IAAI,CAACZ,WAAW,CAACI,KAAK,CAAC;MAAEA,KAAK;MAAEG;IAAQ,CAAE,CAAC,CAACM,SAAS,CAAC;MACpDC,IAAI,EAAGC,IAAuB,IAAI;QAChC,IAAI,CAACd,cAAc,CAACe,SAAS,CAACD,IAAI,CAACE,KAAK,CAAC;QACzC,IAAI,CAAChB,cAAc,CAACiB,QAAQ,CAACH,IAAI,CAAC;MACpC,CAAC;MACDI,QAAQ,EAAE,MAAK;QACb,IAAI,CAACC,aAAa,GAAG,KAAK;QAC1B,IAAI,CAAClB,MAAM,CAACmB,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;MAChC,CAAC;MACDC,KAAK,EAAGC,GAAmC,IAAI;QAC7C,IAAI,CAACC,YAAY,GAAGD,GAAG,CAACD,KAAK,CAACG,OAAO;QACrC,IAAI,CAACL,aAAa,GAAG,IAAI;MAC3B;KACD,CAAC;EACJ;EAEAM,UAAU;IACRC,MAAM,CAACC,QAAQ,CAACC,MAAM,EAAE;EAC1B;;AAzCW/B,cAAc;mBAAdA,cAAc;AAAA;AAAdA,cAAc;QAAdA,cAAc;EAAAgC;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCd3BrC,8BAAuB;MAEnBA,yBAAmG;MACnGA,+BAA8E;MAAxEA;QAAA,OAAYsC,oBAAgB;MAAA,EAAC;MACjCtC,8BAAwB;MACfA,qBAAK;MAAAA,iBAAQ;MAAAA,oBACpB;MAAAA,2BAA+E;MACjFA,iBAAM;MACNA,8BAAwB;MACfA,yBAAQ;MAAAA,iBAAQ;MAAAA,qBACvB;MAAAA,4BAAkG;MACpGA,iBAAM;MACNA,+BAAwB;MAEpBA,wBACF;MAAAA,iBAAS;MAEXA,+BAAwB;MACtBA,iEAEM;MACRA,iBAAM;;;MAlB4BA,eAAkB;MAAlBA,oCAAkB;MAeJA,gBAAkB;MAAlBA,uCAAkB","names":["FormControl","FormGroup","Validators","i0","LoginComponent","constructor","authService","storageService","router","form","login","required","email","password","ngOnInit","onSubmit","event","preventDefault","value","subscribe","next","data","saveToken","token","saveUser","complete","isLoginFailed","navigate","error","err","errorMessage","message","reloadPage","window","location","reload","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\loan-offer-main\\client\\src\\app\\pages\\login\\login.component.ts","D:\\loan-offer-main\\client\\src\\app\\pages\\login\\login.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport {\n  AuthService,\n  AuthServiceTypes,\n  StorageService,\n} from 'src/app/services';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css'],\n})\nexport class LoginComponent implements OnInit {\n  form: FormGroup;\n  isLoginFailed = false;\n  errorMessage = '';\n\n  constructor(\n    private authService: AuthService,\n    private storageService: StorageService,\n    private router: Router\n  ) {\n    this.form = new FormGroup({\n      login: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required]),\n    });\n  }\n\n  ngOnInit(): void {}\n\n  onSubmit(event: Event): void {\n    event.preventDefault();\n\n    const { login, password } = this.form.value;\n\n    this.authService.login({ login, password }).subscribe({\n      next: (data: { token: string }) => {\n        this.storageService.saveToken(data.token);\n        this.storageService.saveUser(data);\n      },\n      complete: () => {\n        this.isLoginFailed = false;\n        this.router.navigate(['home']);\n      },\n      error: (err: { error: { message: string } }) => {\n        this.errorMessage = err.error.message;\n        this.isLoginFailed = true;\n      },\n    });\n  }\n\n  reloadPage(): void {\n    window.location.reload();\n  }\n}\n","<div class=\"col-md-12\">\n  <div class=\"card card-container\">\n    <img id=\"profile-img\" src=\"//ssl.gstatic.com/accounts/ui/avatar_2x.png\" class=\"profile-img-card\" />\n    <form (ngSubmit)=\"onSubmit($event)\" [formGroup]=\"form\" name=\"form\" novalidate>\n      <div class=\"form-group\">\n        <label>Login</label>-->\n        <input type=\"text\" class=\"form-control\" name=\"login\" formControlName=\"login\" />\n      </div>\n      <div class=\"form-group\">\n        <label>Password</label>-->\n        <input type=\"password\" class=\"form-control\" name=\"password\" formControlName=\"password\" required />\n      </div>\n      <div class=\"form-group\">\n        <button class=\"btn btn-primary btn-block\">\n          Login\n        </button>\n      </div>\n      <div class=\"form-group\">\n        <div class=\"alert alert-danger\" role=\"alert\" *ngIf=\"errorMessage\">\n          Login failed: {{ errorMessage }}\n        </div>\n      </div>\n    </form>\n  </div>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}