{"ast":null,"code":"import { HttpHeaders } from '@angular/common/http';\nimport { API_SERVICES, STORAGE_USER_KEY } from 'src/app/constants';\nimport { business } from 'src/app/types';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"..\";\nconst httpOptions = {\n  headers: new HttpHeaders({\n    'Content-Type': 'application/json'\n  })\n};\nexport class AuthService {\n  constructor(http, storageService) {\n    this.http = http;\n    this.storageService = storageService;\n    this.user = null;\n    try {\n      const storagedData = window.localStorage.getItem(STORAGE_USER_KEY);\n      if (storagedData) {\n        const userData = JSON.parse(storagedData);\n        this.user = userData;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n  get isLoggedIn() {\n    return Boolean(this.user);\n  }\n  get hasEditAccess() {\n    return this.user?.role === business.UserRole.admin;\n  }\n  login(params) {\n    return this.http.post(`${API_SERVICES.auth}/login`, params, httpOptions);\n  }\n  register(params) {\n    return this.http.post(`${API_SERVICES}/register`, params, httpOptions);\n  }\n  logout() {\n    this.user = null;\n    this.storageService.clear();\n  }\n}\nAuthService.ɵfac = function AuthService_Factory(t) {\n  return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.StorageService));\n};\nAuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AuthService,\n  factory: AuthService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AACA,SAAqBA,WAAW,QAAQ,sBAAsB;AAE9D,SAASC,YAAY,EAAEC,gBAAgB,QAAQ,mBAAmB;AAIlE,SAASC,QAAQ,QAAQ,eAAe;;;;AAExC,MAAMC,WAAW,GAAG;EAClBC,OAAO,EAAE,IAAIL,WAAW,CAAC;IAAE,cAAc,EAAE;EAAkB,CAAE;CAChE;AAKD,OAAM,MAAOM,WAAW;EAGtBC,YACUC,IAAgB,EAChBC,cAA8B;IAD9B,SAAI,GAAJD,IAAI;IACJ,mBAAc,GAAdC,cAAc;IAJxB,SAAI,GAAgB,IAAI;IAMtB,IAAI;MACF,MAAMC,YAAY,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAACX,gBAAgB,CAAC;MAElE,IAAIQ,YAAY,EAAE;QAChB,MAAMI,QAAQ,GAAGC,IAAI,CAACC,KAAK,CAACN,YAAY,CAAC;QAEzC,IAAI,CAACO,IAAI,GAAGH,QAAQ;;KAEvB,CAAC,OAAOI,CAAC,EAAE;MACVC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC;;EAElB;EAEA,IAAIG,UAAU;IACZ,OAAOC,OAAO,CAAC,IAAI,CAACL,IAAI,CAAC;EAC3B;EAEA,IAAIM,aAAa;IACf,OAAO,IAAI,CAACN,IAAI,EAAEO,IAAI,KAAKrB,QAAQ,CAACsB,QAAQ,CAACC,KAAK;EACpD;EAEAC,KAAK,CAACC,MAAmB;IACvB,OAAO,IAAI,CAACpB,IAAI,CAACqB,IAAI,CAAC,GAAG5B,YAAY,CAAC6B,IAAI,QAAQ,EAAEF,MAAM,EAAExB,WAAW,CAAC;EAC1E;EAEA2B,QAAQ,CAACH,MAAsB;IAC7B,OAAO,IAAI,CAACpB,IAAI,CAACqB,IAAI,CAAC,GAAG5B,YAAY,WAAW,EAAE2B,MAAM,EAAExB,WAAW,CAAC;EACxE;EAEA4B,MAAM;IACJ,IAAI,CAACf,IAAI,GAAG,IAAI;IAChB,IAAI,CAACR,cAAc,CAACwB,KAAK,EAAE;EAC7B;;AAvCW3B,WAAW;mBAAXA,WAAW;AAAA;AAAXA,WAAW;SAAXA,WAAW;EAAA4B,SAAX5B,WAAW;EAAA6B,YAFV;AAAM","names":["HttpHeaders","API_SERVICES","STORAGE_USER_KEY","business","httpOptions","headers","AuthService","constructor","http","storageService","storagedData","window","localStorage","getItem","userData","JSON","parse","user","e","console","log","isLoggedIn","Boolean","hasEditAccess","role","UserRole","admin","login","params","post","auth","register","logout","clear","factory","providedIn"],"sourceRoot":"","sources":["D:\\loan-offer-main\\client\\src\\app\\services\\auth\\auth.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { API_SERVICES, STORAGE_USER_KEY } from 'src/app/constants';\nimport { LoginParams, RegisterParams } from './types';\nimport { StorageService } from '..';\nimport { User } from 'src/app/models';\nimport { business } from 'src/app/types';\n\nconst httpOptions = {\n  headers: new HttpHeaders({ 'Content-Type': 'application/json' }),\n};\n\n@Injectable({\n  providedIn: 'root',\n})\nexport class AuthService {\n  user: User | null = null;\n\n  constructor(\n    private http: HttpClient,\n    private storageService: StorageService\n  ) {\n    try {\n      const storagedData = window.localStorage.getItem(STORAGE_USER_KEY);\n\n      if (storagedData) {\n        const userData = JSON.parse(storagedData);\n\n        this.user = userData;\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  get isLoggedIn(): boolean {\n    return Boolean(this.user);\n  }\n\n  get hasEditAccess(): boolean {\n    return this.user?.role === business.UserRole.admin;\n  }\n\n  login(params: LoginParams): Observable<any> {\n    return this.http.post(`${API_SERVICES.auth}/login`, params, httpOptions);\n  }\n\n  register(params: RegisterParams): Observable<any> {\n    return this.http.post(`${API_SERVICES}/register`, params, httpOptions);\n  }\n\n  logout() {\n    this.user = null;\n    this.storageService.clear();\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}